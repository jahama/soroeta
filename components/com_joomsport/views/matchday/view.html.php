<?php// Check to ensure this file is included in Joomla!defined( '_JEXEC' ) or die( 'Restricted access' );jimport( 'joomla.application.component.view');/** * HTML View class for the Registration component * * @package		Joomla * @subpackage	Registration * @since 1.0 */class bleagueViewmatchday extends JView{	function display($tpl = null)	{		$mainframe = JFactory::getApplication();		JHTML::_('behavior.modal', 'a.team-images');		$pathway  =& $mainframe->getPathway();		$document =& JFactory::getDocument();		$params	= &$mainframe->getParams();	 	// Page Title		$menus	= &JSite::getMenu();		$menu	= $menus->getActive();				$m_id = JRequest::getVar( 'id', 0, '', 'int' );				if(!$m_id){			JError::raiseError( 403, JText::_('Access Forbidden') );			return; 		}				$db			= & JFactory::getDBO();				$query = "SELECT m_name FROM #__bl_matchday WHERE id=".$m_id;		$db->setQuery($query);		$md_title = $db->loadResult();				$query = "SELECT md.m_name,m.match_descr, t1.t_name as home, t2.t_name as away, score1,score2,md.s_id,m.is_extra,t1.id as hm_id,t2.id as aw_id, m.m_played, m.id FROM #__bl_matchday as md, #__bl_match as m, #__bl_teams as t1, #__bl_teams as t2 WHERE m.m_id = md.id AND m.published = 1  AND m.team1_id = t1.id AND m.team2_id = t2.id AND md.id = ".$m_id;		$db->setQuery($query);		$matchs = $db->loadObjectList();		$match = $matchs[0];						$query = "SELECT * FROM #__bl_seasons WHERE s_id = ".$match->s_id;			$db->setQuery($query);			$season_par = $db->LoadObjectList();			$season_par = $season_par[0];								// because the application sets a default page title, we need to get it		// right from the menu item itself		if (is_object( $menu )) {			$menu_params = new JRegistry;// new JParameter( $menu->params );			if (!$menu_params->get( 'page_title')) {				$params->set('page_title',	$md_title);			}		} else {			$params->set('page_title',	$md_title);		}		$document->setTitle( $params->get( 'page_title' ) );		$pathway->addItem( JText::_( $md_title ));		//---language-----------//	require_once(JPATH_ROOT.DS.'components'.DS.'com_joomsport'.DS.'bl_lang.php');				$this->assignRef('bl_lang', $bl_lang);				$this->assignRef('params',		$params); 		$this->assignRef('match',		$matchs);				$this->assignRef('md_title',	$md_title);		$this->assignRef('enbl_extra',$season_par->s_enbl_extra);				parent::display($tpl);	}		}