<?php/*http://BearDev.com */// Check to ensure this file is included in Joomla!jimport('joomla.form.formfield');class JFormFieldModuleseas extends JFormField{	/**	 * Element name	 *	 * @access	protected	 * @var		string	 */	var	$type = 'Season && group';	protected function getInput()	{		$db			=& JFactory::getDBO();		$doc 		=& JFactory::getDocument();						$lang_val = JText::_("Display all season groups");		$query = "SELECT CONCAT(t.name,' ',s.s_name) as name,s.s_id as id FROM #__bl_tournament as t, #__bl_seasons as s WHERE s.t_id = t.id";		$db->setQuery($query);			$rows = $db->loadObjectList();				$selectbox = array();		for($i=0;$i<count($rows);$i++){			$row = $rows[$i];			$selectbox[] = JHTML::_('select.optgroup',  $row->name, 'id', 'name' ); 			$query = "SELECT group_name,id FROM #__bl_groups  WHERE s_id = ".$row->id;			$db->setQuery($query);			$gr = $db->loadObjectList();			$selectbox[] = JHTML::_('select.option',  $row->id.'|0',$lang_val, 'id', 'name' ); 			for($j=0;$j<count($gr);$j++){				$selectbox[] = JHTML::_('select.option',  $row->id.'|'.$gr[$j]->id,$gr[$j]->group_name, 'id', 'name' ); 			}		}				$jqre = '<select name="jform[params][sidgid]" id="playerzdf_id" class="inputbox" size="1">';		$selectbox = array();		for($i=0;$i<count($rows);$i++){			$row = $rows[$i];			$jqre .= '<optgroup label="'.$row->name.'">';			$query = "SELECT group_name,id FROM #__bl_groups  WHERE s_id = ".$row->id;			$db->setQuery($query);			$gr = $db->loadObjectList();			$jqre .= '<option value="'.$row->id.'|0" '.(($this->value==($row->id.'|0'))?"selected":"").'>'.$lang_val.'</option>';			for($j=0;$j<count($gr);$j++){				//$selectbox[] = JHTML::_('select.option',  $row->id.'|'.$gr[$j]->id,$gr[$j]->group_name, 'id', 'name' ); 				$jqre .= '<option value="'.$row->id.'|'.$gr[$j]->id.'" '.(($this->value==($row->id.'|'.$gr[$j]->id))?"selected":"").'>'.$gr[$j]->group_name.'</option>';			}			$jqre .= '</optgroup>';		}		$jqre .= '</select>';								$html = JHTML::_('select.genericlist',   $selectbox, 'jform[params][sidgid]', 'class="inputbox" size="1"', 'id', 'name', $this->value);		//$html .= "\n".'<input type="hidden" id="'.$name.'_id" name="'.$fieldName.'" value="'.$value.'" />';				return $jqre;	}}