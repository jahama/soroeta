<?php/*http://BearDev.com */// Check to ensure this file is included in Joomla!defined('_JEXEC') or die( 'Restricted access' );class JElementModuleseas extends JElement{	/**	 * Element name	 *	 * @access	protected	 * @var		string	 */	var	$_name = 'Season && group';	function fetchElement($name, $value, &$node, $control_name)	{		global $mainframe;		$db			=& JFactory::getDBO();		$doc 		=& JFactory::getDocument();		$template 	= $mainframe->getTemplate();		$fieldName	= $control_name.'['.$name.']';		$article->title = '';		$lang_val = JText::_("Display all season groups");		$query = "SELECT CONCAT(t.name,' ',s.s_name) as name,s.s_id as id FROM #__bl_tournament as t, #__bl_seasons as s WHERE s.t_id = t.id";		$db->setQuery($query);			$rows = $db->loadObjectList();				$selectbox = array();		for($i=0;$i<count($rows);$i++){			$row = $rows[$i];			$selectbox[] = JHTML::_('select.optgroup',  $row->name, 'id', 'name' ); 			$query = "SELECT group_name,id FROM #__bl_groups  WHERE s_id = ".$row->id;			$db->setQuery($query);			$gr = $db->loadObjectList();			$selectbox[] = JHTML::_('select.option',  $row->id.'|0',$lang_val, 'id', 'name' ); 			for($j=0;$j<count($gr);$j++){				$selectbox[] = JHTML::_('select.option',  $row->id.'|'.$gr[$j]->id,$gr[$j]->group_name, 'id', 'name' ); 			}		}				$html = JHTML::_('select.genericlist',   $selectbox, 'params[sidgid]', 'class="inputbox" size="1"', 'id', 'name', $value);		//$html .= "\n".'<input type="hidden" id="'.$name.'_id" name="'.$fieldName.'" value="'.$value.'" />';				return $html;	}}